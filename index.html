<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>O.O</title>
  <style>
    :root {
      --bg: #0b0b0b;
      --panel: #111214;
      --panel-2: #16181c;
      --text: #e8e8e8;
      --muted: #a9acb2;
      --accent: #E0E0E0;
      --danger: #ff4d4d;
      --border: #22252b;
      --shadow: 0 10px 30px rgba(0,0,0,0.55);
      --radius: 14px;
      --focus: 0 0 0 3px rgba(224, 224, 224, 0.35);
    }

    /* Page layout */
    html, body {
      height: 100%;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .card {
      width: 100%;
      max-width: 860px;
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }

    .card-header {
      padding: 24px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, #0f1012, #0d0e10);
    }

    .title {
      margin: 0 0 6px 0;
      font-size: clamp(20px, 2.8vw, 28px);
      letter-spacing: 0.2px;
    }

    .card-body {
      padding: clamp(18px, 3.2vw, 28px);
      display: grid;
      gap: 18px;
    }

    /* Gate section */
    .gate {
      display: grid;
      gap: 12px;
      background: #0f1115;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: clamp(14px, 2.6vw, 18px);
    }

    .controls {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    input[type="date"] {
      appearance: none;
      -webkit-appearance: none;
      background: #0b0d11;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 14px;
      font-size: 15px;
      outline: none;
      box-shadow: inset 0 0 0 1px transparent;
      transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;
    }
    input[type="date"]:focus {
      border-color: var(--accent);
      box-shadow: var(--focus);
      background: #0a0c10;
    }

    .btn {
      appearance: none;
      -webkit-appearance: none;
      background: var(--accent);
      color: #1a1a1a;
      border: 0;
      padding: 12px 16px;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: transform .06s ease, filter .15s ease, box-shadow .15s ease;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
    }
    .btn:hover { filter: brightness(1.05); }
    .btn:active { transform: translateY(1px); }
    .btn:focus-visible { outline: none; box-shadow: var(--focus); }

    .btn-ghost {
      background: transparent;
      color: var(--muted);
      border: 1px solid var(--border);
      box-shadow: none;
    }
    .btn-ghost:hover { color: var(--text); }

    .error {
      display: none;
      color: var(--danger);
      font-size: 14px;
      margin-top: 6px;
    }

    /* Message section */
    .message {
      display: none;
      line-height: 1.7;
      background: #0e1014;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: clamp(16px, 3vw, 22px);
      text-align: justify;
    }

    .message h2 {
      margin: 0 0 10px 0;
      font-size: clamp(18px, 2.4vw, 22px);
    }

    .message p {
      margin: 0 0 12px 0;
      font-size: clamp(14px, 2vw, 16px);
      color: #d7d7d7;
    }

    .muted {
      color: var(--muted);
    }

    /* Responsiveness */
    @media (max-width: 600px) {
      .controls { gap: 10px; }
      .btn, input[type="date"] { flex: 1 1 auto; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="card" role="main" aria-labelledby="title">
      <header class="card-header">
        <h1 id="title" class="title">Password</h1>
      </header>

      <section class="card-body">
        <!-- Gating UI -->
        <div id="gate" class="gate">
          <div class="controls">
            <input id="gateDate" name="gateDate" type="date" inputmode="numeric" aria-required="true" />
            <button id="checkBtn" class="btn" type="button" aria-controls="secret">➡</button>
            <button id="resetBtn" class="btn btn-ghost" type="button">Reset</button>
          </div>
          <p id="errorMsg" class="error" role="alert">Unauthorized</p>
        </div>

        <!-- Secret Message -->
        <article id="secret" class="message" aria-live="polite">
          <h2>Happy Birthday, My Love</h2>
          <p>
            Happy Birthday to my favorite person in the entire world. The one who, even from miles away, manages to steal my breath and make my heart race.
          </p>
          <p>
            I was just sitting here thinking about the fact that you’re officially older than me now… for the next few months, at least. Don’t worry, I’ll be extra respectful to my elder. (Okay, that’s a lie. I plan on being very, very disrespectful the next time I see you). I hope you’re having the most amazing day, my beautiful, dramatic, short-stack of a girlfriend.
          </p>
          <p>
            I wish so badly I was there right now. Not just to give you your presents, but to give you me. I’d start your morning by pulling you back into bed for a few hours. I’d trace every single curve of your soft, silent body with my hands and my lips until you weren’t so silent anymore. Just thinking about the way you feel is driving me crazy from over here.
          </p>
          <p>
            But since I can’t do that, just know my mind is totally on you today. I’m imagining the cute little face you make when you blow out your candles. I’m thinking about that quiet, sexy laugh of yours. I’m even thinking about the way you’ll probably pretend to be mad at me for some silly joke I made, just so I’ll try extra hard to win a smile back.
          </p>
          <p>
            You are the most adorable, captivating, infuriatingly cute woman I have ever known. This distance is tough, but you are so, so worth it. You are my dream girl, and I am counting down the seconds until I can close that distance and show you exactly how much I’ve missed you.
          </p>
          <p>
            Have an incredible day, my love. Eat lots of cake, enjoy your drama, and save some of that birthday energy for me. I can’t wait for our next private celebration.
          </p>
          <p>
            All my love, always.
          </p>
          <p>
            There's so much I need to say to you. We've been through a lot of fights, a lot of breaks and breakups, but we always found our way back. Through it all, you still chose me. You are still here.<br><br>
            I always tell you this: you are the only girl who has ever truly chosen me. I think about that all the time. Sometimes, when we're on a call and you share your screen, I see my own face and I feel a sense of shame. I look at myself and wonder how you could possibly like someone who looks like me. It’s one of the reasons I sometimes turn off the screen—I get insecure.<br><br>
            The other reason is that after a long day, when I finally get to call you, I just want to see you. I want to talk to you, even for a little while, to feel connected and comfortable. But sometimes, you immediately start showing me reels. I know you're excited to share them with me, and I love that you think of me, but it makes me angry and hurt because I miss you. I just need a few minutes of us first, and then I am more than happy to watch anything you want to show me.<br><br>
            Sometimes, your behavior drives me crazy. But I am constantly managing my reactions because, to me, you are my kid—my tiny, sensitive human. I never want to hurt you. If my words ever do, it comes from a place of uncontrollable anger, and that is a part of myself I am always trying to lock away.<br><br>
            No matter what happens, my choice will always be you. And baby, please try to understand my English. When I speak to you in English, my words are simple and straightforward. There are no hidden meanings or codes behind them. Please never misunderstand me.<br><br>
            I love you more than I love myself. Your simplest actions can make me feel weak with happiness in a single glance. You have no idea the power you hold over me.
          </p>
            <br><p><i>With love, Yours Daddy</i></p>
        </article>
      </section>
    </main>
  </div>

    <script>
        const el = {
          title: document.getElementById("title"),
          gate: document.getElementById("gate"),
          date: document.getElementById("gateDate"),
          check: document.getElementById("checkBtn"),
          reset: document.getElementById("resetBtn"),
          error: document.getElementById("errorMsg"),
          secret: document.getElementById("secret")
        };

        function show(elm) {
          elm.style.display = 'grid';
        }

        function hide(elm) {
          elm.style.display = "none";
        }

        function unlock() {
          el.title.textContent = "Happy Birthday MOMMYYY";
          hide(el.error);
          hide(el.gate);
          el.secret.style.display = 'block';
        }

        function lock() {
          el.title.textContent = "Enter Your DOB";
          hide(el.secret);
          show(el.gate);
          show(el.error);
        }

        function clearAll() {
          el.title.textContent = "Enter Your DOB";
          hide(el.error);
          hide(el.secret);
          show(el.gate);
          el.date.value = "";
          el.date.focus();
        }

        // Event wiring
        el.check.addEventListener("click", async () => {
          el.check.disabled = true; // Disable button to prevent multiple clicks

          try {
            const response = await fetch('/api/checkDate', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ date: el.date.value }),
            });

            if (response.ok) {
              unlock();
            } else {
              lock();
            }
          } catch (error) {
            console.error("An error occurred:", error);
            lock(); // Lock on network error
          } finally {
            el.check.disabled = false; // Re-enable button
          }
        });

        el.date.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            el.check.click();
          }
        });

        el.reset.addEventListener("click", clearAll);
    </script>
</body>
</html>
